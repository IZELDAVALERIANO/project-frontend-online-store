{"ast":null,"code":"var _jsxFileName = \"/home/izelda/sd-06-project-frontend-online-store/src/Pages/ListaDeProdutos.jsx\";\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport CampoBusca from \"../Components/CampoBusca\";\nimport ListaCategorias from \"../Components/ListaCategorias\";\nimport Produto from \"../Components/Produto\";\nimport * as Api from \"../services/api\";\nimport carrinho from \"../img/shopping-cart.png\";\nimport \"../App.css\"; // eslint-disable-next-line react/prefer-stateless-function\n\nclass ListaDeProdutos extends Component {\n  constructor() {\n    super();\n    this.state = {\n      produtos: '',\n      categoryId: \"\",\n      produtosNoCarrinho: [],\n      search: ''\n    };\n    this.fetchAPI = this.fetchAPI.bind(this);\n    this.categoryFilter = this.categoryFilter.bind(this);\n    this.addToCart = this.addToCart.bind(this);\n    this.changeSearch = this.changeSearch.bind(this);\n  }\n\n  categoryFilter({\n    target\n  }) {\n    const {\n      value\n    } = target;\n    this.setState({\n      categoryId: value\n    }, () => this.fetchAPI());\n  }\n\n  async changeSearch(prop) {\n    await this.setState({\n      search: prop\n    });\n    await this.fetchAPI();\n  }\n\n  async fetchAPI() {\n    const {\n      categoryId,\n      search\n    } = this.state;\n    const response = await Api.getProductsFromCategoryAndQuery(categoryId, search);\n    const {\n      results\n    } = await response;\n    await this.setState({\n      produtos: results\n    });\n  }\n\n  addToCart(produto) {\n    this.state.produtosNoCarrinho.push(produto);\n  }\n\n  render() {\n    const {\n      produtos,\n      search\n    } = this.state;\n    const zero = 0; // console.log(search === '')\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"aside\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ListaCategorias, {\n      changeSearch: this.changeSearch,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"main\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(CampoBusca, {\n      changeSearch: this.changeSearch,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"cart-img-div\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      \"data-testid\": \"shopping-cart-button\",\n      to: {\n        pathname: \"/CarrinhoDeCompras\",\n        state: {\n          produtosNoCarrinho: this.state.produtosNoCarrinho\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: carrinho,\n      className: \"cart-img\",\n      alt: \"\\xEDcone carrinho\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"ul\", {\n      class: \"listagem\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }\n    }, search === '' ? /*#__PURE__*/React.createElement(\"p\", {\n      \"data-testid\": \"home-initial-message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 15\n      }\n    }, \"Digite algum termo de pesquisa ou escolha uma categoria.\") : produtos.length === zero ? /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 19\n      }\n    }, \"Nenhum produto foi encontrado\") : produtos.map(produto => /*#__PURE__*/React.createElement(Produto, {\n      key: produto.id,\n      produto: produto,\n      addToCart: this.addToCart,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 23\n      }\n    })))));\n  }\n\n}\n\nexport default ListaDeProdutos; // Iniciar requsito 10","map":{"version":3,"sources":["/home/izelda/sd-06-project-frontend-online-store/src/Pages/ListaDeProdutos.jsx"],"names":["React","Component","Link","CampoBusca","ListaCategorias","Produto","Api","carrinho","ListaDeProdutos","constructor","state","produtos","categoryId","produtosNoCarrinho","search","fetchAPI","bind","categoryFilter","addToCart","changeSearch","target","value","setState","prop","response","getProductsFromCategoryAndQuery","results","produto","push","render","zero","pathname","length","map","id"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport CampoBusca from \"../Components/CampoBusca\";\nimport ListaCategorias from \"../Components/ListaCategorias\";\nimport Produto from \"../Components/Produto\";\nimport * as Api from \"../services/api\";\nimport carrinho from \"../img/shopping-cart.png\";\nimport \"../App.css\";\n\n// eslint-disable-next-line react/prefer-stateless-function\nclass ListaDeProdutos extends Component {\n  constructor() {\n    super();\n    this.state = {\n      produtos: '',\n      categoryId: \"\",\n      produtosNoCarrinho: [],\n      search: '',\n    };\n    this.fetchAPI = this.fetchAPI.bind(this);\n    this.categoryFilter = this.categoryFilter.bind(this);\n    this.addToCart = this.addToCart.bind(this);\n    this.changeSearch = this.changeSearch.bind(this);\n  }\n\n  categoryFilter({ target }) {\n    const { value } = target;\n    this.setState({ categoryId: value }, () => this.fetchAPI());\n  }\n\n  async changeSearch(prop) {\n    await this.setState({\n      search: prop,\n    })\n    await this.fetchAPI();\n  }\n\n  async fetchAPI() {\n    const { categoryId, search } = this.state;\n    const response = await Api.getProductsFromCategoryAndQuery(\n      categoryId,\n      search\n    );\n    \n    const { results } = await response;\n    await this.setState({\n      produtos: results,\n    });\n  }\n\n  addToCart(produto) {\n    this.state.produtosNoCarrinho.push(produto);\n  }\n\n  render() {\n    const { produtos, search } = this.state;\n    const zero = 0;\n    // console.log(search === '')\n    return (\n      <div className='wrapper'>\n        <aside>\n          <ListaCategorias changeSearch={ this.changeSearch } />\n        </aside>\n        <main>\n          <CampoBusca changeSearch={ this.changeSearch } />\n          <div class=\"cart-img-div\">\n            <Link data-testid=\"shopping-cart-button\" to={ {\n              pathname: \"/CarrinhoDeCompras\",\n              state: {\n                produtosNoCarrinho: this.state.produtosNoCarrinho,\n              }\n            } } >\n              <img src={ carrinho } className=\"cart-img\" alt=\"ícone carrinho\" />\n            </Link>\n          </div>\n          <ul class=\"listagem\">\n            { search === '' ? (\n              <p data-testid=\"home-initial-message\">Digite algum termo de pesquisa ou escolha uma categoria.</p>\n            ) : (\n                (produtos.length === zero ? (\n                  <p>Nenhum produto foi encontrado</p>\n                ) : (\n                    produtos.map((produto) => (\n                      <Produto\n                        key={ produto.id }\n                        produto={ produto }\n                        addToCart={ this.addToCart }\n                      />\n                    ))\n                  ))\n              ) }\n          </ul>\n        </main>\n      </div>\n    );\n  }\n}\n\nexport default ListaDeProdutos;\n// Iniciar requsito 10  "]},"metadata":{},"sourceType":"module"}